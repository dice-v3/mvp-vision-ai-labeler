# Vision AI Labeler - Environment Variables Template
# Copy this file to .env and update the values

# =============================================================================
# Database Configuration (Updated: Single PostgreSQL Instance)
# =============================================================================

# IMPORTANT: All databases now use the same PostgreSQL instance (port 5432)
# Platform team manages the PostgreSQL instance and creates all databases

# Platform Database (Read-Only Access)
# Managed by Platform team
PLATFORM_DB_HOST=localhost
PLATFORM_DB_PORT=5432
PLATFORM_DB_NAME=platform
PLATFORM_DB_USER=admin
PLATFORM_DB_PASSWORD=devpass

# User Database (Read-Only Access)
# Managed by Platform team, shared with Labeler for authentication
USER_DB_HOST=localhost
USER_DB_PORT=5432
USER_DB_NAME=users
USER_DB_USER=admin
USER_DB_PASSWORD=devpass

# Labeler Database (Full Access)
# Managed by Labeler team (schema only - Platform creates empty database)
LABELER_DB_HOST=localhost
LABELER_DB_PORT=5432
LABELER_DB_NAME=labeler
LABELER_DB_USER=admin
LABELER_DB_PASSWORD=devpass

# =============================================================================
# Storage Configuration
# =============================================================================

# Cloudflare R2 Configuration
# Production: Use your Cloudflare R2 credentials
# Development: Can use MinIO for local testing
S3_ENDPOINT=https://<YOUR_ACCOUNT_ID>.r2.cloudflarestorage.com
S3_ACCESS_KEY=<YOUR_R2_ACCESS_KEY>
S3_SECRET_KEY=<YOUR_R2_SECRET_KEY>
S3_BUCKET_DATASETS=training-datasets
S3_BUCKET_ANNOTATIONS=annotations
S3_REGION=auto
S3_USE_SSL=true

# R2 Public Development URL (Optional)
# For public access to uploaded files
# Get this from Cloudflare R2 dashboard -> Settings -> Public R2.dev subdomain
R2_PUBLIC_URL=https://pub-<YOUR_ACCOUNT_ID>.r2.dev

# =============================================================================
# Authentication
# =============================================================================

# JWT Authentication (must match Platform's secret)
JWT_SECRET_KEY=your-super-secret-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440

# Service JWT Authentication (Phase 16 - Platform Integration)
# CRITICAL: This secret MUST match Platform's SERVICE_JWT_SECRET exactly
# Get this value from Platform team
SERVICE_JWT_SECRET=<MATCH_PLATFORM_SERVICE_JWT_SECRET>
SERVICE_JWT_ALGORITHM=HS256

# =============================================================================
# API Configuration
# =============================================================================

API_HOST=0.0.0.0
API_PORT=8001
API_RELOAD=true
API_WORKERS=1

# CORS Origins (comma-separated)
# For production, add your production domain
# Example: CORS_ORIGINS=https://labeler.yourdomain.com,http://localhost:3010
CORS_ORIGINS=http://localhost:3010,http://localhost:3001,http://localhost:3000

# Frontend URL (for SSO redirect - Phase 17)
# Backend redirects to this URL after SSO login
FRONTEND_URL=http://localhost:3010

# =============================================================================
# Environment
# =============================================================================

ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# =============================================================================
# Production Deployment Notes
# =============================================================================

# When deploying to production:
# 1. Change all passwords and secrets
# 2. Update database host to production PostgreSQL instance
# 3. Set ENVIRONMENT=production
# 4. Set DEBUG=false
# 5. Update CORS_ORIGINS with production domain
# 6. Ensure SERVICE_JWT_SECRET matches Platform exactly
# 7. Configure Cloudflare R2 with production credentials
# 8. Use separate database users with minimum privileges:
#    - labeler_user (full access to labeler DB)
#    - Platform grants read-only access to users DB

# Production Database URLs Example:
# PLATFORM_DB_HOST=vision-platform-prod.xxxxx.rds.amazonaws.com
# USER_DB_HOST=vision-platform-prod.xxxxx.rds.amazonaws.com
# LABELER_DB_HOST=vision-platform-prod.xxxxx.rds.amazonaws.com
# All use port 5432 (same PostgreSQL instance)
